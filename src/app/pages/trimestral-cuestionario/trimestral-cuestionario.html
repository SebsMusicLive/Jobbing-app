<app-hero
  image="assets/Cuestionario.jpg"
  title="Plan trimestral"
  [showButton]="false"> </app-hero>
<section class="py-20 bg-gray-50 min-h-screen pt-32">
  <div class="max-w-4xl mx-auto px-6">

    <div class="bg-white p-8 rounded-xl shadow-xl border-t-8 border-yellow-500 mb-8">
      <div class="flex justify-between items-center mb-4">
        <h1 class="text-3xl md:text-4xl font-serif font-bold text-blue-900">
          Cuestionario de Aprendizaje
        </h1>
        <div class="text-lg font-bold" [ngClass]="{'text-green-600': progressPercentage >= 80, 'text-yellow-600': progressPercentage < 80}">
          {{ progressPercentage }}%
        </div>
      </div>
      <p class="text-lg text-gray-700 italic border-b pb-4 mb-4">
        [cite_start]Plan Trimestral JOBING: "Mi campaña inclusiva"[cite: 465]. [cite_start]Porcentaje mínimo de aprobación: 80%[cite: 466].
      </p>

      <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
        <div class="h-full bg-blue-600 transition-all duration-500" [style.width.%]="progressPercentage"></div>
      </div>
    </div>

    <form (ngSubmit)="submitTest()" class="space-y-6">

      <div *ngFor="let question of questions" class="bg-white p-6 rounded-lg shadow-md border-l-4 border-yellow-500 hover:shadow-lg transition duration-300">

        <label class="block text-lg font-semibold text-gray-800 mb-3">
          {{ question.id }}. {{ question.text }}
        </label>

        <div>
          <textarea *ngIf="question.type === 'textarea'" rows="4"
                    [(ngModel)]="respuestas[question.id]"
                    [name]="'q-textarea-' + question.id"
                    class="w-full p-3 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500"
                    placeholder="Escribe tu respuesta aquí..."></textarea>

          <input *ngIf="question.type === 'text' || question.type === 'fill-in'"
                 type="text"
                 [(ngModel)]="respuestas[question.id]"
                 [name]="'q-text-' + question.id"
                 class="w-full p-3 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500"
                 placeholder="Escribe tu respuesta aquí...">

          <div *ngIf="question.type === 'radio'" class="flex flex-col space-y-2">
            <div *ngFor="let option of question.options">
              <label class="flex items-center space-x-2 text-base text-gray-700 cursor-pointer">
                <input type="radio"
                       [name]="'q-radio-' + question.id"
                       [value]="option"
                       [(ngModel)]="respuestas[question.id]"
                       class="form-radio text-blue-600">
                <span>{{ option }}</span>
              </label>
            </div>
          </div>

        </div>
      </div>

      <div class="pt-8 flex justify-center gap-4">
        <button type="submit" [disabled]="progressPercentage < 1"
                class="bg-blue-800 hover:bg-blue-700 text-white font-bold py-3 px-12 rounded-full shadow-lg transition duration-300 disabled:bg-gray-400">
          Enviar Cuestionario ({{ progressPercentage }}%)
        </button>
        <button type="button" (click)="resetTest()"
                class="bg-white hover:bg-red-50 text-red-700 font-bold py-3 px-12 rounded-full shadow-lg transition duration-300 border border-red-300">
          Reiniciar
        </button>
      </div>

    </form>

  </div>
</section>
